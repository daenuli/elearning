import y from"./Sidebar-3c623214.js";import x from"./PageMainHeader-912a94ba.js";import w from"./Layout-248c6c4e.js";import H from"./PageHeader-38b8e3e2.js";import{_ as k,L as M,H as S,d as f,p as L,a5 as P,ae as D,E as d,o as l,e as _,b as u,a as e,t as m,w as T,m as j,F as b,i as B,v as E,G as O,g as V}from"./app-ae2d89af.js";const A={props:{lesson:Object,student:Object,models:Object,avatar:String},components:{Link:M,Head:S,Layout:w,Sidebar:y,PageHeader:H,PageMainHeader:x},setup(a){let o=f(""),i=f([]);L(()=>{i.value=a.models.data});const n=new P({broadcaster:"pusher",key:"9a98e2a6647e53d16130",cluster:"ap2",forceTLS:!0,encryption:!0});D(()=>{n.channel("lesson-created-notification").listen("LessonCreated",s=>{if(s.message.studentId!==a.student.id){let c={type:"you",avatar:s.avatar,created_at:h(),user_name:s.user_name,text:s.message.message};i.value.push(c)}})});function h(){const s=new Date,c=s.getHours()%12||12,r=s.getMinutes().toString().padStart(2,"0"),g=s.getHours()<12?"AM":"PM";return`${c}:${r} ${g}`}function v(){let s={user_name:a.student.user.name,avatar:a.avatar,type:"me",text:o.value,studentId:a.student.id,created_at:h()};i.value.push(s),o.value="",axios.post(route("student.lessons.discussion.store",a.lesson.id),{message:s.text}).then(c=>{const r=document.querySelector(".chat-history");r.scrollTop=r.scrollHeight}).catch(c=>{})}return{submit:v,message:o,messages:i}}},C={class:"page-body-wrapper"},N={class:"page-body"},q={class:"container-fluid"},F={class:"container-fluid"},I={class:"card"},G={class:"card-header"},U={class:"lesson-title"},W={class:"card-header-right"},z=e("i",{class:"fa fa-caret-left white"},null,-1),J={class:"card-body p-0"},K={class:"row chat-box"},Q={class:"col-md-12 pr-0"},R={ref:"chatHistory",class:"chat-history chat-msg-box custom-scrollbar"},X={key:0},Y={class:"avatar"},Z=["src"],$={class:"message-content"},ee={class:"sender-info"},se={class:"sender-name"},te={class:"message-time"},ae={class:"message-text"},oe={key:1,class:"text-center default-message"},ne={class:"clearfix",id:"chat-input"},ie={class:"row"},ce={class:"col-xl-12"},re={class:"input-group"},de=e("div",{class:"input-group-append"},[e("button",{class:"btn btn-light",type:"submit"},[e("i",{class:"fa fa-send"})])],-1);function le(a,o,i,n,h,v){const s=d("Head"),c=d("PageMainHeader"),r=d("Sidebar"),g=d("PageHeader"),p=d("Link");return l(),_(b,null,[u(s,{title:"Lesson Details"}),u(c),e("div",C,[u(r),e("div",N,[e("div",q,[u(g)]),e("div",F,[e("div",I,[e("div",G,[e("h4",U,m(i.lesson.title),1),e("span",null,m(i.lesson.subject.title),1),e("div",W,[u(p,{href:a.route("student.active-lessons.index"),class:"white"},{default:T(()=>[z,V("Back")]),_:1},8,["href"])])]),e("div",J,[e("div",K,[e("div",Q,[e("form",{class:"form theme-form",onSubmit:o[1]||(o[1]=j((...t)=>n.submit&&n.submit(...t),["prevent"]))},[e("div",R,[n.messages.length?(l(),_("ul",X,[(l(!0),_(b,null,B(n.messages,t=>(l(),_("li",{class:"message mt-4",key:t.text},[e("div",Y,[e("img",{src:t.avatar,alt:"Avatar"},null,8,Z)]),e("div",$,[e("div",ee,[e("span",se,m(t.user_name),1),e("span",te,m(t.created_at),1)]),e("div",ae,m(t.text),1)])]))),128))])):(l(),_("h6",oe,"Start a conversation with your fellow classmates about the lesson! Ask questions, share insights, and collaborate with each other to deepen your understanding of the material."))],512),e("div",ne,[e("div",ie,[e("div",ce,[e("div",re,[E(e("input",{class:"form-control input-txt-bx",id:"message-to-send",type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>n.message=t),name:"message-to-send",placeholder:"Write your message..."},null,512),[[O,n.message]]),de])])])])],32)])])])])])])])],64)}const ve=k(A,[["render",le]]);export{ve as default};
