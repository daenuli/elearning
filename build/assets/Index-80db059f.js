import M from"./Sidebar-3c623214.js";import S from"./Layout-248c6c4e.js";import F from"./PageMainHeader-912a94ba.js";import D from"./PageHeader-38b8e3e2.js";import{_ as H,L as V,H as N,d as h,p as T,E as r,o as d,c as Y,w as f,z as P,b as u,a as s,g as v,t,v as p,I as y,e as n,i as m,F as b,n as g,f as A}from"./app-ae2d89af.js";import{S as I}from"./sweetalert2.all-f377fe99.js";import{h as k}from"./moment-fbc5633a.js";const O={props:{subjects:Object,classes:Object,books:Object},name:"student-layout",components:{Link:V,Head:N,Layout:S,Sidebar:M,PageHeader:D,PageMainHeader:F,moment:k},methods:{forramttedDate:function(o){return k(o).format("MMM D YYYY")}},setup(o){let l=h(o.books);T(()=>{l.value=o.books});let i=h(""),a=h("");return{destroy:c=>{I.fire({title:"Are you sure?",text:`Do you want to delete book ${c.title}?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!"}).then(_=>{_.isConfirmed&&P.Inertia.delete(route("student.books.destroy",c.id))})},search:()=>{!a&&!i&&(l.value=o.books),axios.get(route("student.books.search"),{params:{class_id:i.value,subject_id:a.value}}).then(c=>{l.value=[],l.value=c.data})},class_id:i,subject_id:a,bookList:l}}},z={class:"container-fluid"},E={class:"row"},U={class:"col-sm-12"},q={class:"card"},x={class:"card-header"},G={class:"f-w-300"},J=s("i",{class:"fa fa-book"},null,-1),K={class:"card-body btn-group-wrapper"},Q={class:"row"},R={class:"col-md-6"},W={class:"mb-3 row"},X={class:"col-sm-5 col-form-label"},Z={class:"col-sm-7"},$={value:""},ss=["value"],es={class:"col-md-6"},os={class:"mb-3 row"},ts={class:"col-sm-5 col-form-label"},ls={class:"col-sm-7"},as={value:""},ds=["value"],ns={class:"row"},is={class:"col-md-12"},cs={class:"table-responsive"},rs={class:"table table-sm"},_s=s("th",{scope:"col"},"#",-1),hs={scope:"col"},us={scope:"col"},ms={scope:"col"},bs={scope:"col"},fs={scope:"row"},vs=s("i",{class:"fa fa-book"},null,-1),ps={class:"modal-dialog modal-xl"},ys={class:"modal-content"},gs={class:"modal-header"},ks={class:"modal-title",id:"myLargeModalLabel"},ws={class:"modal-body"},Cs=["src"],Ls={key:1,class:"text-center"},Bs={class:"modal-footer"},js=["disabled","href"],Ms=s("i",{class:"fa fa-download"},null,-1),Ss={"data-bs-dismiss":"modal",class:"btn btn-light"},Fs={key:0,class:"text-center mt-3"};function Ds(o,l,i,a,w,C){const c=r("PageHeader"),_=r("Message"),L=r("Link"),B=r("Layout");return d(),Y(B,{pageTitle:o.__("Books")},{default:f(()=>[u(c),s("div",z,[u(_),s("div",E,[s("div",U,[s("div",q,[s("div",x,[s("h5",G,[J,v(" "+t(o.__("Books")),1)])]),s("div",K,[s("div",Q,[s("div",R,[s("div",W,[s("label",X,[s("b",null,t(o.__("FilterBy Class")),1)]),s("div",Z,[p(s("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>a.class_id=e),onChange:l[1]||(l[1]=(...e)=>a.search&&a.search(...e)),class:"form-control form-control-sm",id:"exampleFormControlSelect31"},[s("option",$," ("+t(o.__("All Classes"))+")",1),(d(!0),n(b,null,m(i.classes,e=>(d(),n("option",{value:e.id,key:e.id},t(e.name),9,ss))),128))],544),[[y,a.class_id]])])])]),s("div",es,[s("div",os,[s("label",ts,[s("b",null,t(o.__("FilterBy Subject")),1)]),s("div",ls,[p(s("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>a.subject_id=e),onChange:l[3]||(l[3]=(...e)=>a.search&&a.search(...e)),class:"form-control form-control-sm",id:"FilterBySubject"},[s("option",as," ("+t(o.__("All Subjects"))+")",1),(d(!0),n(b,null,m(i.subjects,e=>(d(),n("option",{value:e.id,key:e.id},t(e.title),9,ds))),128))],544),[[y,a.subject_id]])])])])]),s("div",ns,[s("div",is,[s("div",cs,[s("table",rs,[s("thead",null,[s("tr",null,[_s,s("th",hs,t(o.__("Title")),1),s("th",us,t(o.__("Subject")),1),s("th",ms,t(o.__("Class")),1),s("th",bs,t(o.__("Book")),1)])]),s("tbody",null,[(d(!0),n(b,null,m(a.bookList,(e,j)=>(d(),n("tr",{key:e.id},[s("th",fs,t(j+1),1),s("td",null,t(e.title),1),s("td",null,t(e.subject.title),1),s("td",null,t(e.school_class.name),1),s("td",null,[u(L,{href:o.route("student.books.show",e.id),class:"btn btn-info btn-xs"},{default:f(()=>[vs]),_:2},1032,["href"])]),s("div",{class:g(["modal fade",`bookFile${e.id}`]),tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"},[s("div",ps,[s("div",ys,[s("div",gs,[s("h4",ks,t(e.title),1)]),s("div",ws,[e.file_path?(d(),n("embed",{key:0,src:e.file_path,width:"100%",height:"600px"},null,8,Cs)):(d(),n("p",Ls,[s("i",null,t(o.__("File not found"))+".",1)]))]),s("div",Bs,[s("a",{disabled:!e.file_path,href:o.route("student.books.download",e.id),class:g([{disabled:!e.file_path},"btn btn-success"])},[Ms,v(" "+t(o.__("Download")),1)],10,js),s("button",Ss,t(o.__("Close")),1)])])])],2)]))),128))])]),a.bookList.length?A("",!0):(d(),n("p",Fs,t(o.__("No books found"))+". ",1))])])])])])])])])]),_:1},8,["pageTitle"])}const Is=H(O,[["render",Ds]]);export{Is as default};
