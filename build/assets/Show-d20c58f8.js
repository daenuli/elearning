import P from"./Sidebar-3c623214.js";import k from"./PageMainHeader-912a94ba.js";import S from"./Layout-248c6c4e.js";import C from"./PageHeader-38b8e3e2.js";import{_ as H,L,H as I,d as _,p as N,q as V,E as u,o as b,e as h,b as p,a as e,t as r,f as D,w as E,n as g,F as B,g as M,a7 as Y}from"./app-ae2d89af.js";import{x as A}from"./main-3bec7040.js";import{V as x}from"./vue3-pdf-embed-e87645ee.js";const F={props:{video_progress:Number,files:Array,lesson:Object},components:{Link:L,Head:I,Layout:S,Sidebar:P,PageHeader:C,Datepicker:A,VuePdfEmbed:x,PageMainHeader:k},setup(t){let n=_("description");function v(s){n.value=s}const a=_(null),m=_(0);let l=_(0),d=_(0),c=null;const y=s=>{var i=/(?:\?v=|&v=|youtu\.be\/)(.*?)(?:\?|&|$)/,o=s.match(i);return o&&o[1]?o[1]:null};N(()=>{const s=T=>w(T,t),i=document.createElement("script");i.src="https://www.youtube.com/iframe_api";const o=document.getElementsByTagName("script")[1];o.parentNode.insertBefore(i,o),window.onYouTubeIframeAPIReady=()=>{a.value=new window.YT.Player("player",{videoId:y(t.lesson.youtube_link),events:{onStateChange:s}})}});const f=s=>{Y.post(`/student/lessons/${t.lesson.id}/save-progress`,{progress:s}).then(i=>{})};V(()=>{clearInterval(c)});function w(s,i){if(i.video_progress<80)if(s.data===window.YT.PlayerState.PLAYING){let o=a.value.getDuration();c=setInterval(()=>{d.value=a.value.getVideoLoadedFraction(),m.value=a.value.getCurrentTime(),l.value=m.value/o*100,d.value=d.value/1*100,f(l.value)},3e3)}else s.data===window.YT.PlayerState.PAUSED?clearInterval(c):s.data===window.YT.PlayerState.ENDED&&(clearInterval(c),l.value=100,f(l.value))}return{player:a,watchTime:m,progress:l,buffer:d,activeTab:n,activateTab:v}}},U={class:"page-body-wrapper"},j={class:"page-body"},q={class:"container-fluid"},z={class:"container-fluid"},G={key:0,class:"alert alert-success",role:"alert"},O={class:"card"},R={class:"card-header"},J={class:"card-header-right"},K=e("i",{class:"fa fa-caret-left white"},null,-1),Q={class:"card-body"},W={class:"nav nav-tabs",id:"myTab",role:"tablist"},X={class:"nav nav-tabs",role:"tablist"},Z={class:"nav-item"},$={class:"nav-item"},ee={class:"tab-content",id:"myTabContent"},ae=["innerHTML"],te={key:1,class:"mt-5 text-center"},se=e("div",{id:"player"},null,-1),oe=[se];function ne(t,n,v,a,m,l){const d=u("Head"),c=u("PageMainHeader"),y=u("Sidebar"),f=u("PageHeader"),w=u("Link");return b(),h(B,null,[p(d,{title:t.__("Lesson Details")},null,8,["title"]),p(c),e("div",U,[p(y),e("div",j,[e("div",q,[p(f)]),e("div",z,[t.$page.props.flash.success?(b(),h("div",G,[e("p",null,r(t.$page.props.flash.success),1)])):D("",!0),e("div",O,[e("div",R,[e("h6",null,r(t.__("Lesson"))+": "+r(v.lesson.title),1),e("div",J,[p(w,{href:t.route("student.active-lessons.index"),class:"pull-right white"},{default:E(()=>[K,M(r(t.__("Back")),1)]),_:1},8,["href"])])]),e("div",Q,[e("ul",W,[e("ul",X,[e("li",Z,[e("a",{class:g(["nav-link",{active:a.activeTab==="description"}]),href:"#",onClick:n[0]||(n[0]=s=>a.activateTab("description")),role:"tab","aria-controls":"description","aria-selected":"false"},r(t.__("Description")),3)]),e("li",$,[e("a",{class:g(["nav-link",{active:a.activeTab==="video"}]),href:"#",onClick:n[1]||(n[1]=s=>a.activateTab("video")),role:"tab","aria-controls":"video","aria-selected":"true"},r(t.__("Video")),3)])])]),e("div",ee,[e("div",{class:g(["tab-pane fade p-10",{show:a.activeTab==="description",active:a.activeTab==="description"}]),id:"description",role:"tabpanel","aria-labelledby":"description-tab"},[v.lesson.description?(b(),h("div",{key:0,innerHTML:v.lesson.description},null,8,ae)):(b(),h("p",te,[e("i",null,r(t.__("No description is provided for this lesson"))+".",1)]))],2),e("div",{class:g(["tab-pane fade p-10",{show:a.activeTab==="video",active:a.activeTab==="video"}]),id:"video",role:"tabpanel","aria-labelledby":"video-tab"},oe,2)])])])])])])],64)}const ue=H(F,[["render",ne]]);export{ue as default};
