import L from"./Sidebar-70ec4b27.js";import A from"./Layout-0cebbb75.js";import F from"./PageMainHeader-1aa20976.js";import I from"./PageHeader-ccea9f45.js";import{_ as V,L as E,H,p as N,d,j as B,E as y,o as l,e as r,b as k,a as e,t as o,F as O,i as j,a7 as x,z,v as G,a8 as D,g as U}from"./app-31c25c41.js";import{E as Y}from"./Editor-3c392ea5.js";import{S as R}from"./sweetalert2.all-ca2a8785.js";const W={props:{questions:Object,assessment:Object},components:{Link:E,Head:H,Layout:A,Sidebar:L,Editor:Y,PageHeader:I,PageMainHeader:F},setup(s){N(()=>{c.value=s.assessment.time_limit_in_minutes*60-s.assessment.status.time_spent*60,setInterval(()=>{c.value-=1,_.value=n(c.value)},1e3),history.pushState(null,document.title,location.href),window.addEventListener("popstate",function(a){history.pushState(null,document.title,location.href)})});const n=a=>{if(a!==void 0){var g=Math.floor(a/60),M=Math.round(a)%60,P=g.toString().padStart(2,"0")+":"+M.toString().padStart(2,"0");return P}return 0},v=["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","wordcount","visualchars"],t="h1 h2 h3 h4 h5 h6 | undo redo | styles | bold italic underline| alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | fullscreen preview |",p="body { font-family:Helvetica,Arial,sans-serif; font-size:16px }",b=d(0);let m=d(!1);const u=d(0),_=d(""),i=d(!1),h=d(!1),f=d(s.questions.data),c=d(s.assessment.time_limit_in_minutes*60),w=B(()=>c.value<=0);function C(a){console.log(a.student_answer),m.value=u.value===s.questions.data.length-1,u.value<s.questions.data.length-1&&u.value++,a.student_answer===a.correct_answer&&b.value++,x.post(route("student.assessments.store",s.assessment.id),{question:a,timeLeft:c.value,status:"In Progress"})}function Q(){u.value=s.questions.data.length-1,m.value=!1}function q(){u.value--}const T=async()=>{h.value=!0;try{await R.fire({title:"Are you sure you want to finish the test?",input:"checkbox",inputValue:0,allowOutsideClick:!1,inputPlaceholder:"Yes, I want to finish the test.",confirmButtonText:'Finish <i class="fa fa-arrow-right"></i>',showCancelButton:!0,inputValidator:g=>!g&&"Please accept if you want to finish the test."})&&z.Inertia.post(`/student/assessments/${s.assessment.id}`,{questions:f.value,status:"Completed"})}catch{h.value=!1}};function S(){i.value=!0}return{questions:f,timeLeft:c,isTimeOver:w,timeOver:i,timerEnded:S,currentQuestionCount:u,questionsEnd:m,score:b,submitAndGoNext:C,submitAssesment:T,goToPrevQuestion:q,goToLastQuestion:Q,plugins:v,toolbar:t,content_style:p,timeInMinutes:_}}},J={class:"p-10"},K={class:"card mt-5"},X={class:"card-header"},Z={class:"f-w-300 text-center"},$={class:"card-body"},tt={key:0},et={class:"pull-right"},st={key:0},nt={key:0},it=["value"],ot={key:1,class:"mt-5"},at=["title"],lt=["title"],rt=e("i",{class:"fa fa-step-forward"},null,-1),ut=[rt],dt=["title"],ct=e("i",{class:"fa fa-caret-right"},null,-1),mt=[ct],_t=["disabled","title"],ht=e("i",{class:"fa fa-caret-left"},null,-1),ft=[ht],vt=["title"],bt=e("i",{class:"fa fa-step-backward"},null,-1),gt=[bt],yt={key:1},kt={class:"text-danger"},pt=["disabled"],wt={key:1};function Ct(s,n,v,t,p,b){const m=y("PageHeader"),u=y("Message"),_=y("editor");return l(),r("div",J,[k(m,{breadcrumb_title:""}),k(u),e("div",K,[e("div",X,[e("h6",Z,o(v.assessment.title),1)]),e("div",$,[t.isTimeOver?(l(),r("div",wt,[e("p",null,o(s.__("Time's up"))+" !",1)])):(l(),r("div",tt,[e("p",et,o(s.__("Time left"))+": "+o(t.timeInMinutes)+" "+o(s.__("Minutes")),1),t.questionsEnd?(l(),r("div",yt,[e("h2",kt,o(s.__("Warning")),1),e("p",null,o(s.__("Please make sure the following before FINISHING the exam"))+".",1),e("ul",null,[e("li",null,". "+o(s.__("You have attempted maximum number of questions"))+".",1),e("li",null,". "+o(s.__("All the solved questions have been reviwed carefully"))+".",1)]),e("button",{onClick:n[7]||(n[7]=(...i)=>t.submitAssesment&&t.submitAssesment(...i)),class:"btn btn-sm btn-danger pull-right ml-1",title:"Finish Test"},"Finish"),e("button",{class:"btn btn-sm btn-primary pull-right",onClick:n[8]||(n[8]=(...i)=>t.goToLastQuestion&&t.goToLastQuestion(...i)),disabled:t.currentQuestionCount===0},o(s.__("Back")),9,pt)])):(l(),r("div",st,[e("h5",null,o(t.questions[t.currentQuestionCount].text),1),t.questions[t.currentQuestionCount].type==="Multiple Choice"?(l(),r("div",nt,[(l(!0),r(O,null,j(t.questions[t.currentQuestionCount].options,(i,h)=>(l(),r("div",{key:h},[e("label",null,[G(e("input",{type:"radio",value:i.text,"onUpdate:modelValue":n[0]||(n[0]=f=>t.questions[t.currentQuestionCount].student_answer=f)},null,8,it),[[D,t.questions[t.currentQuestionCount].student_answer]]),U(" "+o(i.text),1)])]))),128))])):(l(),r("div",ot,[k(_,{modelValue:t.questions[t.currentQuestionCount].student_answer,"onUpdate:modelValue":n[1]||(n[1]=i=>t.questions[t.currentQuestionCount].student_answer=i),"api-key":"6g685dmceoqy8iip7a7dfmn0z3u4m9k1iwt89isp9jai9yy6",init:{theme:"silver",height:600,plugins:t.plugins,toolbar:t.toolbar,content_style:t.content_style}},null,8,["modelValue","init"])])),e("button",{onClick:n[2]||(n[2]=i=>t.submitAssesment()),class:"btn btn-sm btn-danger mt-3 pull-right ml-1",title:s.__("Finish Test")},o(s.__("Finish")),9,at),e("button",{class:"btn btn-sm btn-primary mt-3 pull-right ml-1",onClick:n[3]||(n[3]=i=>t.currentQuestionCount=t.questions.length-1),title:s.__("Last Question")},ut,8,lt),e("button",{class:"btn btn-sm btn-primary mt-3 pull-right ml-1",onClick:n[4]||(n[4]=i=>t.submitAndGoNext(t.questions[t.currentQuestionCount])),title:s.__("Next")},mt,8,dt),e("button",{class:"btn btn-sm btn-primary mt-3 pull-right",onClick:n[5]||(n[5]=(...i)=>t.goToPrevQuestion&&t.goToPrevQuestion(...i)),disabled:t.currentQuestionCount===0,title:s.__("Previus")},ft,8,_t),e("button",{class:"btn btn-sm btn-primary mt-3 pull-right mr-1",onClick:n[6]||(n[6]=i=>t.currentQuestionCount=0),title:s.__("First Question")},gt,8,vt)]))]))])])])}const At=V(W,[["render",Ct]]);export{At as default};
